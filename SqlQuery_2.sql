DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'Exercise_1.MovieRentalMigrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '202006202230179_InitialModel'
BEGIN
    CREATE TABLE [dbo].[Genres] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        CONSTRAINT [PK_dbo.Genres] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Videos] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        [ReleaseDate] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.Videos] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[VideoGenres] (
        [Video_Id] [int] NOT NULL,
        [Genre_Id] [int] NOT NULL,
        CONSTRAINT [PK_dbo.VideoGenres] PRIMARY KEY ([Video_Id], [Genre_Id])
    )
    CREATE INDEX [IX_Video_Id] ON [dbo].[VideoGenres]([Video_Id])
    CREATE INDEX [IX_Genre_Id] ON [dbo].[VideoGenres]([Genre_Id])
    ALTER TABLE [dbo].[VideoGenres] ADD CONSTRAINT [FK_dbo.VideoGenres_dbo.Videos_Video_Id] FOREIGN KEY ([Video_Id]) REFERENCES [dbo].[Videos] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[VideoGenres] ADD CONSTRAINT [FK_dbo.VideoGenres_dbo.Genres_Genre_Id] FOREIGN KEY ([Genre_Id]) REFERENCES [dbo].[Genres] ([Id]) ON DELETE CASCADE
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202006202230179_InitialModel', N'Exercise_1.MovieRentalMigrations.Configuration',  0x1F8B0800000000000400ED59CD6EE33610BE17E83B083AB545D64AB29736B077913A4911749D045112F41630D2D8214A512A4919368A3E590F7DA4BE4287FA172959B2B1488BB60810D824E7FFE37066FCE7EF7F4C3F6E22E6AC41481AF3997B3239761DE0411C52BE9AB9A95ABEFBD6FDF8E1CB2FA69761B4719ECA73EFF539A4E472E6BE2A959C799E0C5E21227212D140C4325EAA4910471E0963EFF4F8F83BEFE4C40364E1222FC799DEA75CD108B22FF8751EF300129512B6884360B258C71D3FE3EADC900864420298B9971B100195F07CE23AE78C12D4C007B6741DC279AC8842FDCE1E25F84AC47CE527B840D8C336013CB7244C42A1F7597D7CAC09C7A7DA04AF262C5905A95471B427C393F7854F3C93FC20CFBA95CFD06B97E85DB5D556679E9BB93F001768B929E96CCE843ED5F4EA243B7BE4D42B4755DC111EFAEFC899A74CA502661C5225083B72EED21746831F61FB10FF0C7CC653C69A1AA14EB8D75AC0A53B112720D4F61E96859ED7A1EB786D3ACF24ACC81A34B911D75CBD3F759D1B144E5E1854016F18ECAB58005A08822808EF885220B8E60199CB2CE9862CFDBF948608C34BE23A0BB2F9047CA55E672E7E749D2BBA81B05C293478E414EF141229918225E486ACE92AD3CF10F7444388A5EBDC03CBB6E52B4D72B84FB2ADE72C5678E04AC4D17DCC4A9262FDF9818815285438EED8F4E35404863253AF86CE4E40659C46022A3BFB3FA0DE10508610840F100917A861294B7F7EA05AB665DC587096D83B149C25FE3AC15922770C38CFA58C039AE9D0446729BF6DCE250F9D5DCAE491A88CC068203269825844C933F71BCB3F3D0CABAB57332C92F04E8653AF618D7D03F1A1548422D80A4317F19AC23D428D30BD051BD57127F1352CAEA52CF0625AA059FBA08CC0D6DE6E1B6039A04D5E262D8BBC70A841DEB0D7E05101A871A40B606616180871A56FADAA37924519D4068B524733C9B4CDEA407115CABAD8F1F26AA7AC8ABC9EB268BA20498299A25126152B8E9FD748F377FEFE454494F3F002D9514B54DA569230EF911518BB281A35BDA2422ACC30E485E884320F23EB5807707B50550A6C61D38E5789B5F2B8FE9C9398A58D495CBBEF0A2D8A50A7CC3830836CD365F5296144743C20F398A511EF7B847651E74F42933E5FB1394C3D4371D32D9EE51703A5A69747C5A0B83507C620CF02FBC7A087EEEF8E411F87D69BDB64D4DA78FB98B6F3524760ABACDB1FBDEA48678C3A2F8BCEA85DC5AD919C6D778C0A6ECEAA2BC4DA1D95E03D752AB2FD813A654CF6D4C97C36EC085AAF8779A4C24FF58A18AFC5B4C8DCC39DB695CAF323AE83BAAFD15198C6FDAD54104DF48189FF0B9B338A88AD0F2C08A74B902AAFE15D6C7A4F8DA6FD9FD3407B52866C4C17FDE65D08D52E1DEC3386EAF81D8D075F1311BC12F15544365F3739D9CDC59E0DE27FDA57A31AB1103FABE1466C3FBF1F0CD41D89D43EDC97E186E3558B6944CDEA5BAE79089B99FB6B4674E65CFFF45CD21D39B702D3CB9973ECFCB677346BB5F7135ED2ED21FCB08EB5F331345B92E156F5C47A836FF905025081731EE459764E644042DB63FA81DA29BDE8044D15C674B87AFA0B4B10FA2E66C5BF54025F32ABCEB91394073421AC65B5FD188FC920DAA48A9FB9730109709D1A6C03C748DB557B54AC0DF70E39A0770A30009CAE8AA5113A3B6A9D01FB9701677C28DF1638BB0AC4CF0E9CEEF191DDAC8F980CF50F86F2FA10DFB4179D9EF2ACD8331FE91C1AF5CF8CBA38770F6FBA39F729DEDCEC95D163C2E0E0AA9A38ED9E5FF5F43E76C2B79AE1C1B955CB6CB3431B3FB21A656C391B1B30B6BBA9B29394357D792B63F798CFD99D14DED0C62F9B9821245DD52CF4EF9C1C82D6DDACCE5CF3655C260943A3F28851C82C40112C1FC9B95074490285DB014899FD86F04458AA3BF7E805C26B7E9BAA24556832442FACF59B844E35BBE46743C8B6CED3DB241BF77F0E13504DAA2BE05BFE7D4A5958E97DD5514BF5B0D039ACA8F5752C95AEF957DB8AD34DCC47322ADC57A5DE07881286CCE42DF7C91A0ED1ED51C2275891605B36C4FD4C8603D176FBF482929520912C78D4F4F815311C469B0F7F010CDE4CA6E01F0000 , N'6.4.4')
END

IF @CurrentMigration < '202006202233144_PopulateTableGenres'
BEGIN
    INSERT INTO Genres VALUES ('Action')
    INSERT INTO Genres VALUES ('Sci-Fi')
    INSERT INTO Genres VALUES ('Comedy')
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202006202233144_PopulateTableGenres', N'Exercise_1.MovieRentalMigrations.Configuration',  0x1F8B0800000000000400ED59CD6EE33610BE17E83B083AB545D64AB29736B077913A4911749D045112F41630D2D8214A512A4919368A3E590F7DA4BE4287FA172959B2B1488BB60810D824E7FFE37066FCE7EF7F4C3F6E22E6AC41481AF3997B3239761DE0411C52BE9AB9A95ABEFBD6FDF8E1CB2FA69761B4719ECA73EFF539A4E472E6BE2A959C799E0C5E21227212D140C4325EAA4910471E0963EFF4F8F83BEFE4C40364E1222FC799DEA75CD108B22FF8751EF300129512B6884360B258C71D3FE3EADC900864420298B9971B100195F07CE23AE78C12D4C007B6741DC279AC8842FDCE1E25F84AC47CE527B840D8C336013CB7244C42A1F7597D7CAC09C7A7DA04AF262C5905A95471B427C393F7854F3C93FC20CFBA95CFD06B97E85DB5D556679E9BB93F001768B929E96CCE843ED5F4EA243B7BE4D42B4755DC111EFAEFC899A74CA502661C5225083B72EED21746831F61FB10FF0C7CC653C69A1AA14EB8D75AC0A53B112720D4F61E96859ED7A1EB786D3ACF24ACC81A34B911D75CBD3F759D1B144E5E1854016F18ECAB58005A08822808EF885220B8E60199CB2CE9862CFDBF948608C34BE23A0BB2F9047CA55E672E7E749D2BBA81B05C293478E414EF141229918225E486ACE92AD3CF10F7444388A5EBDC03CBB6E52B4D72B84FB2ADE72C5678E04AC4D17DCC4A9262FDF9818815285438EED8F4E35404863253AF86CE4E40659C46022A3BFB3FA0DE10508610840F100917A861294B7F7EA05AB665DC587096D83B149C25FE3AC15922770C38CFA58C039AE9D0446729BF6DCE250F9D5DCAE491A88CC068203269825844C933F71BCB3F3D0CABAB57332C92F04E8653AF618D7D03F1A1548422D80A4317F19AC23D428D30BD051BD57127F1352CAEA52CF0625AA059FBA08CC0D6DE6E1B6039A04D5E262D8BBC70A841DEB0D7E05101A871A40B606616180871A56FADAA37924519D4068B524733C9B4CDEA407115CABAD8F1F26AA7AC8ABC9EB268BA20498299A25126152B8E9FD748F377FEFE454494F3F002D9514B54DA569230EF911518BB281A35BDA2422ACC30E485E884320F23EB5807707B50550A6C61D38E5789B5F2B8FE9C9398A58D495CBBEF0A2D8A50A7CC3830836CD365F5296144743C20F398A511EF7B847651E74F42933E5FB1394C3D4371D32D9EE51703A5A69747C5A0B83507C620CF02FBC7A087EEEF8E411F87D69BDB64D4DA78FB98B6F3524760ABACDB1FBDEA48678C3A2F8BCEA85DC5AD919C6D778C0A6ECEAA2BC4DA1D95E03D752AB2FD813A654CF6D4C97C36EC085AAF8779A4C24FF58A18AFC5B4C8DCC39DB695CAF323AE83BAAFD15198C6FDAD54104DF48189FF0B9B338A88AD0F2C08A74B902AAFE15D6C7A4F8DA6FD9FD3407B52866C4C17FDE65D08D52E1DEC3386EAF81D8D075F1311BC12F15544365F3739D9CDC59E0DE27FDA57A31AB1103FABE1466C3FBF1F0CD41D89D43EDC97E186E3558B6944CDEA5BAE79089B99FB6B4674E65CFFF45CD21D39B702D3CB9973ECFCB677346BB5F7135ED2ED21FCB08EB5F331345B92E156F5C47A836FF905025081731EE459764E644042DB63FA81DA29BDE8044D15C674B87AFA0B4B10FA2E66C5BF54025F32ABCEB91394073421AC65B5FD188FC920DAA48A9FB9730109709D1A6C03C748DB557B54AC0DF70E39A0770A30009CAE8AA5113A3B6A9D01FB9701677C28DF1638BB0AC4CF0E9CEEF191DDAC8F980CF50F86F2FA10DFB4179D9EF2ACD8331FE91C1AF5CF8CBA38770F6FBA39F729DEDCEC95D163C2E0E0AA9A38ED9E5FF5F43E76C2B79AE1C1B955CB6CB3431B3FB21A656C391B1B30B6BBA9B29394357D792B63F798CFD99D14DED0C62F9B9821245DD52CF4EF9C1C82D6DDACCE5CF3655C260943A3F28851C82C40112C1FC9B95074490285DB014899FD86F04458AA3BF7E805C26B7E9BAA24556832442FACF59B844E35BBE46743C8B6CED3DB241BF77F0E13504DAA2BE05BFE7D4A5958E97DD5514BF5B0D039ACA8F5752C95AEF957DB8AD34DCC47322ADC57A5DE07881286CCE42DF7C91A0ED1ED51C2275891605B36C4FD4C8603D176FBF482929520912C78D4F4F815311C469B0F7F010CDE4CA6E01F0000 , N'6.4.4')
END

IF @CurrentMigration < '202006202238599_VideoHasOneGenre'
BEGIN
    IF object_id(N'[dbo].[FK_dbo.VideoGenres_dbo.Videos_Video_Id]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[VideoGenres] DROP CONSTRAINT [FK_dbo.VideoGenres_dbo.Videos_Video_Id]
    IF object_id(N'[dbo].[FK_dbo.VideoGenres_dbo.Genres_Genre_Id]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[VideoGenres] DROP CONSTRAINT [FK_dbo.VideoGenres_dbo.Genres_Genre_Id]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Video_Id' AND object_id = object_id(N'[dbo].[VideoGenres]', N'U'))
        DROP INDEX [IX_Video_Id] ON [dbo].[VideoGenres]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Genre_Id' AND object_id = object_id(N'[dbo].[VideoGenres]', N'U'))
        DROP INDEX [IX_Genre_Id] ON [dbo].[VideoGenres]
    ALTER TABLE [dbo].[Videos] ADD [Genre_Id] [int]
    CREATE INDEX [IX_Genre_Id] ON [dbo].[Videos]([Genre_Id])
    ALTER TABLE [dbo].[Videos] ADD CONSTRAINT [FK_dbo.Videos_dbo.Genres_Genre_Id] FOREIGN KEY ([Genre_Id]) REFERENCES [dbo].[Genres] ([Id])
    DROP TABLE [dbo].[VideoGenres]
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202006202238599_VideoHasOneGenre', N'Exercise_1.MovieRentalMigrations.Configuration',  0x1F8B0800000000000400ED59DD6EE34414BE47E21D2C5F01EAC669F706A26457256D51C4A6ADEAB6E2AE9AD827E988F1D8CC8CA3448827E38247E21538E37FCF388913B1050954A94A67CEFFF9E6FCA47FFEFEC7F8E32662CE1A84A4319FB8E783A1EB000FE290F2D5C44DD5F2DDB7EEC70F5F7E31BE0EA38DF35CD2BDD774C8C9E5C47D552A19799E0C5E21227210D140C4325EAA4110471E0963EF6238FCCE3B3FF70045B828CB71C60F29573482EC0FFC731AF300129512368F4360B238C71B3F93EADC920864420298B8D71B100195F072EE3A978C12B4C007B6741DC279AC8842FB464F127C2562BEF2133C20EC719B00D22D099350D83DAAC9FBBA30BCD02E783563292A48A58AA323059EBF2F62E299EC2745D6AD628651BBC6E8AAADF63A8BDCC4FD01B840CF4D4DA329139AAA19D541467BE6D4276755DE111EFAE7CC99A64CA502261C5225083B73EED305A3C18FB07D8C7F063EE129634D8BD026BC6B1DE0D1BD8813106AFB00CBC2CE59E83A5E9BCF33192BB6064FEEC48CABF717AE738BCAC9824195F086C3BE8A05A087208882F09E2805826B199085CCD26EE8D2BF4B6D88307C24AE33279B4FC057EA75E2E247D7B9A11B08CB93C282274EF14D21931229584A6EC99AAE32FB0C75CF348458BACE03B0EC5ABED22487FB20BB7A29F27A23E2E8216625477EFCF248C40A149A1BDB777E9C8AC0B064ECD5B8D98BA64C504F3465B4FFA3E90DD1642841EC009170851696BAF4E747AA755BCEF5456601BCD3805982AF0B982568FB00F352CA38A099014D6416CADB9E5CF3D0D963499E83CA7ECC036292268842D43B71BFB122D32DAF7A72B5BC22126D79C3C1E0DCF4B1E18DFDFAB0432A42116885A3F3784DE101614698BE828DEA788FD8068B27290BAC983E68D13EA86652B1DCD4D16EFB6085A0CD5E562B8BBD08A9C1DEF0D79051A2A741D1012EF3FDEFCF70656C6DA7D74F4299D386843250667169BBD481E02A8DF584E3E5234E390A793B66A1F19C24095688C66C549C387E3E184DDFF9C74F0E512EC30B64C70051595B69C27A475660DCA26AB4F4860AA9B0B29005D185641A46165907687720AA54D8C2A59DAE126725B9FE9CB398F38CC95C87EF063D8AD0A6CC3930936CF3654329614474348E69CCD288EF6A3EFBB8F356D0E4CF4F6C0963CF30DC0C8B67C5C540A919E55E39281ECD8939C82BC0F139D8C1F74FE760978456AF6D0A6A5DBC7D4EDB75A923B165C5DD9DBC92A257867425ED1A65DB15D50E43AFA4E632BA52ABC350E93DCEA4A24D9C68D2D1C660F90B6936B7CCA49EC1AAF9AB8FA3669FB1536EB51B93A4025CD5768CF6322E4AFDE17DDCAAFD3989EBA0EF6B8C30D67D7F2B1544034D30F07F61534611E235C19C70BA04A9F261DFC5D5F8C258EDFF3D6BB62765C8FAECDA6FBEAE501DD2830BC9A1817FCF86C2D74404AF447C1591CDD74D49F61672E426F99F8E55AF8D2DC4CFAAD7C6D6B5A7BD189E5B8BC28C87B099B8BF664C2367F6D34BC977E6DC097CA22367E8FC765ACE4F5BD21AFDE8B83DCA1EE34FD9EE106820340EB249552A8155D46ACAF7B8B1073421AC65B3DD42FAA057C7AF9267DE5C41025CC3B2E5561F45FB7A6525D57846877C3F7253B577831E4BE8EE1D34EF2EF822163AB1391877AC639DFBE9EEF5B44B72F7AAF81957D796F78D35E4E0B26A6FB89F673DB5E702444CE3DB7C04ABA4AB5A841E7538042DAC543433BE8C4BD01A169524463D9B8322580CC9A55074490285D70148997D75F64C58AA27D76801E18CDFA52A4915BA0CD182B5BE8AD3D0DFA73FDBC1DB368FEF92EC6BAEBFC3053493EA7A7EC7BF4F290B2BBB6FEC7ABE4B847E5345E7D2B954BA83ADB695A4DB98F7145484AF2A058F10250C85C93BEE93359C62DB93844FB022C1B61CEF760B399C8876D8C75794AC04896421A3E6D7FFA1F2F4BFA83EFC05FAE1C147D41A0000 , N'6.4.4')
END

IF @CurrentMigration < '202006202246236_AddColumnClassificationToTableVideo'
BEGIN
    ALTER TABLE [dbo].[Videos] ADD [Classification] [int] NOT NULL DEFAULT 0
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202006202246236_AddColumnClassificationToTableVideo', N'Exercise_1.MovieRentalMigrations.Configuration',  0x1F8B0800000000000400ED59CD6EE33610BE17E83B083AB545D6B2934B1BD8BB489D6461749D045112F416D0D2D8214A512A4919368A3E590F7DA4BE4287FA17293BB291DD1668B1C0C2226786F3F3717E98BFFEF873FC611331670D42D2984FDCD160E83AC08338A47C357153B57CF7BDFBE1FDD75F8DAFC268E33C9574679A0E39B99CB82F4A25E79E27831788881C443410B18C976A10C49147C2D83B1D0E7FF046230F50848BB21C677C9F724523C83EF0731AF300129512368F4360B258C71D3F93EADC900864420298B8571B100195F03C729D0B46096AE0035BBA0EE13C5644A17EE78F127C2562BEF2135C20EC619B00D22D099350E87D5E93F7356178AA4DF06AC65254904A1547070A1C9D153EF14CF6A33CEB563E43AF5DA177D5565B9D796EE27E042ED072F3A4F329139AAAE9D541467BE2D42B2755DC111EFADF89334D994A054C38A44A1076E2DCA50B46839F60FB10FF027CC253C69A1AA14EB8D75AC0A53B112720D4F61E96859EB3D075BC369F6732566C0D9EDC88195767A7AE7383879305832AE00D837D150B400B411005E11D510A04D73220739975BA7196FEBF3C0D118697C475E664F309F84ABD4C5CFCE93AD7740361B95268F0C829DE2964522205EB901BB2A6AB4C3FE3B8271A422C5DE71E58B62D5F6892C37D906D3D1771BD1671741FB392235F7E7E2062050AD58DED3D3F4E45606832F66ADCEC455326A8279A32DAFFD1F405D1641C82D80122E112352CCFD2BF1FA83EDB326EBFAC292352D2250D8A3C55A8AEF1686EBD267927E60B481F07F912D65D902FAF433FC8A75103F0A6713379CDC8AAAE28BD6E425BC85B5C09044208826D11384DC8B61D3D876801A230C4A70C6BBDEB3C1196E2E7C80A4B8BFA63CCC28AF6743FED9D0E177AADA23FB33D9DFBB4B97821651CD0CC21CDDC5204B97DDC150F9D3D11AFA158A4A739BA9026E8348CEFC4FDCE52BF5B5E95346B7905E2DAF28683C1C8B4B0618D9D3FB1C75184F2CA61F3784DE11E1305617A0B36AA0347D8C8145092C56D376DD0A27D50CDCB8305A34675DB06CB056DF6B2DE58EC854B0DF686BD868CF29636283A2EB199C1F747B852B6D6D3EB27A18C694342E928B33CB44DEAC8145518EB1ED5CB9BD4B299F57674B3E3394912BCAA8DEEB65871FCBCB59DBEF30FEFFDA25C8617C88E16B0D2B63A092B165981B18B47A3A6D7544885B5812C884E6AD330B2C83A40BB0351E5812D5CDAE12A715692EBDF398BD9919ACCB5FBAED1A20875CA8C0333C8365F365610464447E99FC62C8DF8AEF6611F775ECC9BFCF98A2D61EC198A9B6EF12CBF182835BDDC2B06C5A53932067906383C063BF8FEE918EC92D0EA969A825A1BFDE5999D4353A4B9F7E591D2CE761D7029F3F86E489414BDE2AEF373D788D3CED3B61B7A412597D10518ED86EADCC3542A8ACF912A1DAC0C26D59066DDD04CEA0EBAEA30FB186A562F3BE4561133492AC055C5CC285AE3A280BCFE4E6355949CC475D0F6357A18AB89BF950AA2812618F8BFB229A308F19A604E385D825479C7EB9E0E47A7C693CFBFE7F9C59332647DDE60BEF8184BB54B5F1D540F1C049B932B5F1311BC10F14D4436DF3625D9D3E9812F0CFF695FF59AE443FCADDE6E92CFEC3F50529D8D1A32AC41668693EA66E2FE96319D3BB39F9F4BBE13E756E0653F7786CEEFC7A1E7B821B251D90E9BF3EC31E398E913210B42232AEBA4250EF9D42EEF7782F2802684B574B68B519F7BA0FD57C933772E2101AE01DE32ABCF41FBAA6E25D5B890AFD97EE0246DCF2E3D86E4DD33725EA7F06E2D74607330EE18173BE7E7DDE37397E4EE51F6338ED62DEB1B63D2ABC3B43D817F9EF1D9EE3010318DBF172158255DD52274D3C4216861A5A299F1655C82D6D0A82431F2D91C14C1B44A2E84A24B1228DC0E0073A57E9C2D9EB6AEA20584337E9BAA24556832440BD67AECD5D0DF777EF646D0D6797C9B64CF9D6F6102AA497565B8E53FA6B4F184776DE7F35D22F49D2A6AA08EA5D2B570B5AD24DDC4BCA7A0C27D552A78802861284CDE729FACE118DD1E257C821509B665A3B85BC8EB8168BB7D7C49C94A904816326A7EFC440C87D1E6FDDF442517A6361D0000 , N'6.4.4')
END

IF @CurrentMigration < '202008242040292_TableGenreColumnNameRequiredMaxLength'
BEGIN
    DECLARE @var0 nvarchar(128)
    SELECT @var0 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.Genres')
    AND col_name(parent_object_id, parent_column_id) = 'Name';
    IF @var0 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[Genres] DROP CONSTRAINT [' + @var0 + ']')
    ALTER TABLE [dbo].[Genres] ALTER COLUMN [Name] [nvarchar](255) NOT NULL
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202008242040292_TableGenreColumnNameRequiredMaxLength', N'Exercise_1.MovieRentalMigrations.Configuration',  0x1F8B0800000000000400ED59DB6EE336107D2FD07F10F4D41659CB76B0401BD8BB48BDC9C2E83A09A224E85B404B63872845A92415D828FA657DE827F5173AD45DA4ECC846765B14C5020B8B9C19CEE5702ECC5F7FFC3979BF8998F30C42D2984FDDD160E83AC08338A47C3D7553B57AF3BDFBFEDDD75F4D2EC268E33C9474A79A0E39B99CBA4F4A25679E27832788881C443410B18C576A10C49147C2D81B0F873F78A3910728C245598E33B94DB9A211641FF8398B7900894A095BC4213059ACE38E9F4975AE48043221014CDD8B0D88804A781CB9CE39A30435F081AD5C87701E2BA250BFB37B09BE12315FFB092E1076B74D00E956844928F43EABC9FB9A301C6B13BC9AB11415A452C5D1810247A7854F3C93FD28CFBA95CFD06B17E85DB5D556679E9BBA1F810BB4DC3CE96CC684A66A7A7590D19E38F5CA4915778487FE77E2CC52A65201530EA912849D3837E992D1E027D8DEC5BF009FF294B1A646A813EEB51670E946C40908B5BD8555A1E73C741DAFCDE7998C155B83273762CED5E9D875AEF070B2645005BC61B0AF6201682108A220BC214A81E05A06642EB34E37CED2FF97A721C2F092B8CE826C3E015FABA7A93B7EFBD6752EE906C272A5D0E09E53BC53C8A4440A1D1A1AA75E9167BACE1436CE7FA021C4D2756E8165DBF2892639FE07D9D66311E84B1147B7312B39F2E5C73B22D6A050FFD8DEF3E35404862613AF06D25E7865827AC22BA3FD1F5EC7C00B7FF682D7FE43103B40247C400DCBB3F4EF3B1AF540A6216BC68894744583227115AA6B3C9A5B4763BE80F471902F61DD05F9F23AF4837C1A35006F1A3797978CACEB12D3EB26B485BCC69540208420D81681D3846CDBD10B8896200A437CCAB0F8BBCE0361297E8EACB0B4A83FC62CAC68C7FB696F74B8D06B15FDA9EDE9DCA7CDC57329E380660E69E69622C8EDE32E78E8EC89780DC5223D2DD0853441A7617CA7EE7796FADDF2AAA459CB2B10D796371C0C46A6850D6BECFC894D8F2294570E5BC4CF146E315110A6B760A33A70849D4D012559DC76D3062DDA07D5BC3C58306A54B76DB05CD0662FEB8DC55EB8D4606FD86BC8286F6983A2E3129B197C7F842B656B3DBD7E12CA983624948E32CB43DBA48E4C5185B16E5ABDBC6B2DBB5B6F477B3B599024C1ABDA68778B15C7CF7BDDD91BFFF06630CA657881ECE8092B6DAB93B062913518BB78346A7A498554581BC892E8A4360B238BAC03B43B10551ED8C2A51DAE126725B9FE9DB3982DAAC95CBBEF122D8A50A7CC3830836CF365730661447494FE59CCD288EF6A1FF671E7C5BCC99FAFD812269EA1B8E916CFF28B8152D3CBBD62505C9A2363906780C363B083EF9F8EC12E09AD6EA929A8B5D15F9ED93934459A7B5F1E29ED6CD70197328FEF864449D12BEE3A3F778D38ED3C6DBBA1175472195D80D16EA8CE3D4CA5A2F81CA9D2C1CA60520D69D60DCDA5EEA0AB0EB38FA166F5B2436E153193A4025C55CC8CA235290AC8CB0F375645C9495C076D7F460F6335F1B7524134D00403FF57366314215E132C08A72B902AEF78DDF1703436DE80FE3DEF319E9421EBF328F3C5C758AA5DFAE2A07AE020D89C5CF93311C11311F6D3C85EA107BE36FC77FDF64D4436DF36251D39D587F85BBDDE549FD97FA0A43A3335645843CD1CA7D6CDD4FD2D633A73E63F3F967C27CEB5C08B7FE60C9DDFF77B64177A8E1B281B55EEB099CF1E398E994411B22034A2B2AE5AE2C04FED527F23280F6842584B67BB30F5B907DA7F953C73E70324C035C05B66F539685F05AEA41A17F225DB0F9CAAED39A6C7C0BC7B5ECE6B16DEADA50E6C0EC61DA363E72CBD7B94EE92DC3DD67EC631BB657D63647A71B0B6A7F1CF334ADBDD0622A6F1C72404ABA4EB5A846EA038042DAC543473BE8A4BD01A1A9524463E5B80229856C9B95074450285DB0160AED40FB5C533D745B48470CEAF5395A40A4D8668C95A0FBF1AFAFBCECFDE0BDA3A4FAE93ECE9F3354C4035A9AE0CD7FCC794369EF32E3B2AF20E11FA4E153550C752E95AB8DE5692AE62DE5350E1BE2A15DC4194301426AFB94F9EE118DDEE257C823509B665D3B85BC8CB8168BB7DF28192B520912C64D4FCF889180EA3CDBBBF01573CE909531D0000 , N'6.4.4')
END

IF @CurrentMigration < '202008242052198_TableVideoColumnNameRequiredMaxLength'
BEGIN
    DECLARE @var1 nvarchar(128)
    SELECT @var1 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.Videos')
    AND col_name(parent_object_id, parent_column_id) = 'Name';
    IF @var1 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[Videos] DROP CONSTRAINT [' + @var1 + ']')
    ALTER TABLE [dbo].[Videos] ALTER COLUMN [Name] [nvarchar](255) NOT NULL
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202008242052198_TableVideoColumnNameRequiredMaxLength', N'Exercise_1.MovieRentalMigrations.Configuration',  0x1F8B0800000000000400ED59DD6EDB3614BE1FB077107439A496EDA0C016D82D3237298CD5491025C1EE025A3A768851944652818D624FB68B3DD25E6187FA17293BB291B6BB280A141679CEE1F9F9787E987FFFFE67F27E1331E71984A4319FBAA3C1D07580077148F97AEAA66AF5E667F7FDBB1F7F985C84D1C67928E94E351D727239759F944ACE3C4F064F1011398868206219AFD42088238F84B1371E0E7FF146230F50848BB21C67729B724523C83EF07316F300129512B6884360B258C71D3F93EA5C910864420298BA171B100195F038729D7346096AE0035BB90EE13C5644A17E67F7127C2562BEF6135C20EC6E9B00D2AD089350E87D5693F7356138D626783563292A48A58AA303058E4E0B9F7826FB519E752B9FA1D72ED0BB6AABADCE3C37753F021768B979D2D98C094DD5F4EA20A33D71EA95932AEE080FFDEFC499A54CA502A61C5225083B716ED225A3C16FB0BD8BFF003EE529634D8D5027DC6B2DE0D28D8813106A7B0BAB42CF79E83A5E9BCF33192BB6064F6EC49CABD3B1EB5CE1E164C9A00A78C3605FC502D04210444178439402C1B50CC85C669D6E9CA5FF2F4F4384E125719D05D97C02BE564F5377FCF6ADEB5CD20D84E54AA1C13DA778A7904989143A34344EBD22CF749D296C9CFF404388A5EBDC02CBB6E5134D72FC0FB2ADC722D097228E6E635672E4CB8F7744AC41A1FEB1BDE7C7A9080C4D265E0DA4BDF0CA04F5845746FB1D5EDF125EC6A9082620123EA0CAE5E1FAF71D8D0E973563444ABAA24191C90A5B3440CDADA32F4181F1E3EE4089F3AE3B50DE8F7E77208D1A37C0346E2E2F1959D735A7D7D5680B798D3B82C80841B02D22A989E1B6A317102D411486F8946137E03A0F84A5F839B2C2D2A2FE18B3B0A21DEFA7BDD1E142AF55F4A7B6A7739F3617CFA58C039A39A4996C8A20B78FBBE0A1B327E235148B7CB54017D2049D86F19DBA3F59EA77CBABB2682DAF405C5BDE703018991636ACB1132A76418A505E396C113F53B8C5CC4198DE828DEAC011B63A05946471FD4D1BB4681F54F3F26005A951DDB6C172419BBD2C40167BE15283BD61AF21A3BCA50D8A8E4B6CA6F4FD11AE94ADF5F4FA492863DA90503ACAAC176D933A324515C6BA8BF5F236B66C77BD1DFDEE64419204AF6AA3FF2D561C3F6F7E676FFCC3BBC32897E105B2A349ACB4AD4EC21246D660ECE2D1A8E9251552616D204BA293DA2C8C2CB20ED0EE405479600B9776B84A9C95E4FA77CE62F6AC2673EDBE4BB428429D32E3C00CB2CD970D1E8411D1D10BCC6296467C573FB18F3BAFEE4DFE7CC59630F10CC54DB778965F0C949A5EEE1583E2D21C19833C031C1E831D7CDF3A06BB24B4BAA5A6A0D6467F7966E7D01469EE7D7DA4B4B35D075CCA3CBE1B122545AFB8EBFCDC35F3B4F3B4ED865E50C965740146BBA13AF730958AE273A44A072B834935A459373497BA83AE3ACC3E869AD5CB0EB955C44C920A705531338AD6A428202FBFE458152527711DB4FD193D8CD5C4DF4A05D140130CFC3FD98C5184784DB0209CAE40AABCE375C7C3D1D87814FAFF3CD0785286ACCF2BCD579F6BA976E98B93EB8183607394E5CF44044F44D8C3EC5EA1073E3F7CF7DB4EA11D137E88BFD5EB4DF8992F0E945467A9860C6BC099E304BB99BA9F33A63367FEFB63C977E25C0B4C0267CED0F9AB7978FE08D20749C70D978D8A77D8FC678F1FC74CA5085F101A5D59872D71F8A776D9BF1194073421ACA5B35DA4FADC09EDBF4A9EB9F30112E01AEC2DB3FA1CB4AF1A57528DCBF992ED074ED8F64CD36378DE3D3BE7F50BEFD652073607E38E31B273AEDE3D567749EE1E71BFE0C8DDB2BE313EBD3864DB93F99719ABEDCE0311D3F84B138255D2752D4237531C8216562A9A395FC525680D8D4A12239F2D40114CABE45C28BA2281C2ED003057EA57DCE2C9EB225A4238E7D7A94A52852643B464AD57610DFD7DE7676F076D9D27D749F60CFA1A26A09A5457866BFE6B4A1B4F7B971DD57987087DA78A7AA863A9745D5C6F2B495731EF29A8705F950AEE204A180A93D7DC27CF708C6EF7123EC19A04DBB281DC2DE4E540B4DD3EF940C95A904816326A7EFC440C87D1E6DD7F16588C0D701D0000 , N'6.4.4')
END

IF @CurrentMigration < '202008242100100_TableVideosColumnGenreIDNameChange'
BEGIN
    IF object_id(N'[dbo].[FK_dbo.Videos_dbo.Genres_Genre_Id]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[Videos] DROP CONSTRAINT [FK_dbo.Videos_dbo.Genres_Genre_Id]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Genre_Id' AND object_id = object_id(N'[dbo].[Videos]', N'U'))
        DROP INDEX [IX_Genre_Id] ON [dbo].[Videos]
    EXECUTE sp_rename @objname = N'dbo.Videos.Genre_Id', @newname = N'GenreID', @objtype = N'COLUMN'
    DECLARE @var2 nvarchar(128)
    SELECT @var2 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.Videos')
    AND col_name(parent_object_id, parent_column_id) = 'GenreID';
    IF @var2 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[Videos] DROP CONSTRAINT [' + @var2 + ']')
    ALTER TABLE [dbo].[Videos] ALTER COLUMN [GenreID] [int] NOT NULL
    CREATE INDEX [IX_GenreID] ON [dbo].[Videos]([GenreID])
    ALTER TABLE [dbo].[Videos] ADD CONSTRAINT [FK_dbo.Videos_dbo.Genres_GenreID] FOREIGN KEY ([GenreID]) REFERENCES [dbo].[Genres] ([Id]) ON DELETE CASCADE
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202008242100100_TableVideosColumnGenreIDNameChange', N'Exercise_1.MovieRentalMigrations.Configuration',  0x1F8B0800000000000400ED59DB6EE336107D2FD07F10F45864ADD8C1026D60EF22759285D1751244D945DF025A1A3B44294A25A9C0C6A25FD6877E527FA143DD454A8E6CECA50F8B00814D7286733973A3FFFDFB9FE9DB6DC49C671092C67CE68E47A7AE033C8843CA37333755EB573FBB6FDFFCF8C3F42A8CB6CEC7F2DC993E87945CCEDC27A59273CF93C11344448E221A8858C66B350AE2C82361EC4D4E4F7FF1C6630F90858BBC1C677A9F724523C8BEE0D779CC0348544AD8320E81C9621D77FC8CAB73432290090960E65E6D410454C2E3D8752E182528810F6CED3A84F3581185F29D7F90E02B11F38D9FE002610FBB04F0DC9A300985DCE7F5F1A12A9C4EB40A5E4D58B20A52A9E2E84086E3B3C2269E497E9465DDCA6668B52BB4AEDA69AD33CBCDDC77C0056A6EDE743E67429F6A5A75949D3D71EA9593CAEF080FFD77E2CC53A65201330EA912849D3877E98AD1E037D83DC47F009FF194B1A6442813EEB51670E94EC40908B5BB877521E722741DAF4DE79984155983265762C1D5D9C4756EF072B2625039BCA1B0AF6201A82108A220BC234A81E09A076426B36E37EED2FFCBDB10611824AEB324DBF7C037EA69E64E5EBF769D6BBA85B05C2924F8C029C614122991428784C6AD37E4996E32818DFB3FD21062E93AF7C0B26DF944931CFFA36CEBB170F4B588A3FB989514F9F2E303111B50287F6CEFF9712A024392A95703692FBC324603E1959DFD0EAF6F092FE3560413100997287279B9FEFC40A3C379CD199192AE695064B242170D5073EBE82028307E5C0C9438EF8A81323E86C5401A3522C0546E21AF19D9D435675068B4997C8E1841648420D80E91D4C470DBD04B8856200A457CCAB01B709D8F84A5F8756CB9A575FA5DCCC2EAEC64FFD93BED2EB45A75FECCB6746ED3E6E285947140338334934DE1E4F675573C74F678BC866291AF9668429AA0D1D0BF33F7274BFC6E7E5516ADF915886BF31BBB6642BAE597186A0A9C8B206F13E6440624B4A18F96085B966958C14EC4D83D29427965E865FC4CE11E330E617A0BB6AA037FD82215109445DA3075D7AC7D50CDA0C3CA5347435B77CB746DF2B27059E4852B0CF286BE068F32BA1B273A82DFB4FC7E6454C2D6727AC33894586870280D65BAB4AD524786A9DC5877BF5EDEFE966DB2D7D3274F97244930C41B7D73B1E2F879D33C7FE51FDE5546390F2F901DCD65256D7513963EB2016317AF4649AFA9900A6B0A59119D0CE761641DEB006D0FA2CA0B5BB8B4DD55E2AC3CAE3FE72466AF6B12D7E6BB468D229429530E4C27DB74D9C04218111D3DC43C6669C4FBFA907DD47957D0A4CF576C0E53CF10DC348B67D9C54A3C6D2B0FF241113447FA20CF0087FBA087EE5BFBA08F43ABCB6A326A6D0CE767761C4D96E6DED7474A3BDB75C0A5CCE3FD90284F0CF2BBCECF5DB3523B4FDB661804958CC7E2B2A32A788D6B0F93A8A83D474AD405DE7E61CCE2637BCCAA41E6910A2F552D326ACEB4C8FF2F3FE05805213FE23A28FB335A088B81BF930AA2913E30F2FF64734611A1F58125E1740D52E58DAE3B391D4F8CB7A0FFCFBB8C2765C8863CCE7CF571966A93BE38B01E38FF352758FE4C44F044843DC3EE657AE0ABC377BBF532ED18EC43FCAC3EDF609FD9E2404E55366DB0B0C69305CEADDB99FB29A3397716BF3F166427CEADC01470EE9C3A7F1D09A4E346CA46BDFA3A539F3D741C33C322EA416850667DB55402D3BB55ECEF04E5014D086BE96AD7A621A1A415A9F8993B979000D731D2526BC8457B6A70C5D430E74BAA1F3856DB83CC8089B97F60CEAB1E46E44AFB350771CFECD8394CF7CFD25D9CBBE7DA2F3867B7B46FCC4C2F4ED6F638FE656669BB5F41C4347E9642AC4ABAA959E81FA938042DAC5467167C1D979835242A8F185970098A6032261742D13509146E078019563FF916EF6357D10AC205BF4D55922A5419A2156B3D216BE8EFBB3F7B3068CB3CBD4DB237D3CFA1028A49753DB9E5BFA6B4F10E78DD918A7B58E8982AAAA8F6A5D2D574B3AB38DDC47C20A3C27C552A78802861C84CDE729F3CC331B27D90F01E3624D8956D673F93971DD136FBF492928D20912C78D4F4F815311C46DB37FF0110022C7E9D1D0000 , N'6.4.4')
END

IF @CurrentMigration < '202008242155035_TableVideosColumnClassificationChangeType'
BEGIN
    DECLARE @var3 nvarchar(128)
    SELECT @var3 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.Videos')
    AND col_name(parent_object_id, parent_column_id) = 'Classification';
    IF @var3 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[Videos] DROP CONSTRAINT [' + @var3 + ']')
    ALTER TABLE [dbo].[Videos] ALTER COLUMN [Classification] [tinyint] NOT NULL
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202008242155035_TableVideosColumnClassificationChangeType', N'Exercise_1.MovieRentalMigrations.Configuration',  0x1F8B0800000000000400ED59DB6EE336107D2FD07F10F45864ADD8C1026D60EF22EB240BA3EB2488B28BBE05B434768852944A52818DA25FD6877E527FA143DD454A8E6CECA50F8B00814D7286733973A3FFFDFB9FE9DB6DC49C671092C67CE68E47A7AE033C8843CA37333755EB573FBB6FDFFCF8C3F42A8CB6CEA7F2DC993E87945CCEDC27A59273CF93C11344448E221A8858C66B350AE2C82361EC4D4E4F7FF1C6630F90858BBC1C677A9F724523C8BEE0D779CC0348544AD8320E81C9621D77FC8CAB73432290090960E65E6D410454C2E3D8752E182528810F6CED3A84F3581185F29D7F94E02B11F38D9FE002610FBB04F0DC9A300985DCE7F5F1A12A9C4EB40A5E4D58B20A52A9E2E84086E3B3C2269E497E9465DDCA6668B52BB4AEDA69AD33CBCDDCF7C0056A6EDE743E67429F6A5A75949D3D71EA9593CAEF080FFD77E2CC53A65201330EA912849D3877E98AD1E057D83DC4BF039FF194B1A6442813EEB51670E94EC40908B5BB877521E722741DAF4DE79984155983265762C1D5D9C4756EF072B2625039BCA1B0AF6201A82108A220BC234A81E09A076426B36E37EED2FFCBDB10611824AEB324DB0FC037EA69E64E5EBF769D6BBA85B05C2924F8C829C614122991428784C6AD37E4996E32818DFB3FD11062E93AF7C0B26DF944931CFFA36CEBB170F4B588A3FB989514F9F2E303111B50287F6CEFF9712A024392A95703692FBC324603E1959DFD0EAF6F092FE3560413100997287279B9FEFC40A3C379CD199192AE695064B242170D5073EBE82028307E5C0C9438EF8A81323E86C5401A3522C0546E21AF19D9D435675068B4997C8E1841648420D80E9194DFF66E874E6EDB7909D10A44A1874F193603AEF389B014BF8E2DAFB44EBF8F59589D9DEC3F7BA7BD8546ABCE9FD986CE4DDA5CBC90320E68668F66AE297CDCBEEE8A87CE1E87D7482CD2D5122D4813B419BA77E6FE6489DFCDAF4AA235BF02706D7E63D7CC47B7FC12234D817311E45DC29CC8808436F2D11261CB320D2BD879189B274528AF0CBD8C9F29DC63C2214C6FC15675C00F3BA40281B2C81AA6EE9AB50FAA19735878EA6068EB6E99AE4D5ED62D8BBC708541DED0D7E0510677E34447EC9B96DF8F8C4AD85A4E6F1887120B0D0EA5A14C97B655EA4830951BEBE6D7CBBBDFB24BF67ADAE4E99224094678A36D2E561C3FEF99E7AFFCC39BCA28E7E105B2A3B7ACA4AD6EC2CA473660ECE2D528E93515526149212BA273E13C8CAC631DA0ED415479610B97B6BB4A9C95C7F5E79CC46C754DE2DA7CD7A851843265CA81E9649B2E9B570823A2A38598C72C8D785F1BB28F3A6F0A9AF4F98ACD61EA19829B66F12CBB5889A76DE5413E2882E6481FE419E0701FF4D07D6B1FF4716835594D46AD8DE1FCCC86A3C9D2DCFBFA486967BB0EB89479BC1F12E589417ED7F9B96B546AE769DB0C83A092F1585C765405AF71ED611215B5E74889BAC0DB2F8C597C6C8F5935C83C52E1A5AA4546CD9916F9FFE5F71BAB20E4475C07657F460B6131F077524134D20746FE1F6CCE2822B43EB0249CAE41AABCCF7527A7E389F114F4FF7996F1A40CD990B799AF3ECD526DD217E7D503C7BFE600CB9F89089E88B047D8BD4C0F7C74F86EB75EA61D737D889FD5E79BEB71A0DB65F638905B95511B26B54694058EAEDB99FB674673EE2C7E7B2CC84E9C5B8169E0DC3975FE3A124CC78D958D9AF575263F7BF038668E45E483D0C0CC7A6BA904A678ABE0DF09CA039A10D6D2D5AE4F43C2492B52F133772E2101AEE3A4A5D6908BF6D4E18AA961CE97543F70B4B68799015373FFD09C573E8CCA95F66B0EE29EF9B173A0EE9FA7BB3877CFB65F70D66E69DF989B5E9CAEED91FCCBCCD376CF828869FC328558957453B3D0BF5371085A58A9CE2CF83A2E316B48541E31B2E01214C1844C2E84A26B1228DC0E00B3AC7EF52DDEC8AEA215840B7E9BAA2455A832442BD67A45D6D0DF777FF668D096797A9B64CFA69F43051493EA9A72CBDFA5B4F11678DD918A7B58E8982A2AA9F6A5D21575B3AB38DDC47C20A3C27C552A78802861C84CDE729F3CC331B27D94F0013624D895AD673F93971DD136FBF492928D20912C78D4F4F815311C46DB37FF0104D1976DA01D0000 , N'6.4.4')
END

IF @CurrentMigration < '202008242212572_AddTableTagSetRelationshipWithTableVideosRenameColumns'
BEGIN
    CREATE TABLE [dbo].[Tags] (
        [ID] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](255) NOT NULL,
        CONSTRAINT [PK_dbo.Tags] PRIMARY KEY ([ID])
    )
    CREATE TABLE [dbo].[VideoTags] (
        [VideoID] [int] NOT NULL,
        [TagID] [int] NOT NULL,
        CONSTRAINT [PK_dbo.VideoTags] PRIMARY KEY ([VideoID], [TagID])
    )
    CREATE INDEX [IX_VideoID] ON [dbo].[VideoTags]([VideoID])
    CREATE INDEX [IX_TagID] ON [dbo].[VideoTags]([TagID])
    ALTER TABLE [dbo].[VideoTags] ADD CONSTRAINT [FK_dbo.VideoTags_dbo.Videos_VideoID] FOREIGN KEY ([VideoID]) REFERENCES [dbo].[Videos] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[VideoTags] ADD CONSTRAINT [FK_dbo.VideoTags_dbo.Tags_TagID] FOREIGN KEY ([TagID]) REFERENCES [dbo].[Tags] ([ID]) ON DELETE CASCADE
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202008242212572_AddTableTagSetRelationshipWithTableVideosRenameColumns', N'Exercise_1.MovieRentalMigrations.Configuration',  0x1F8B0800000000000400ED5A5F6FDB36107F1FB0EF20E87148AD3841812DB05BA44E5204AB93204E8ABD058C74768849942652818D619F6C0FFB48FB0A3BEABF48CA9634272D8AA2401193BCE3FDF9DDF178D4BF7FFF3379BF0E7CEB19624E4336B5C7A343DB02E6861E65ABA99D88E59B9FEDF7EF7EFC6172EE056BEB73B1EE58AE434AC6A7F69310D189E370F70902C2470175E390874B3172C3C0215EE81C1D1EFEE28CC70E200B1B7959D6E43661820690FEC09FB390B9108984F8F3D0039FE7E338B348B95A5724001E1117A6F6F91A6297727818DBD6A94F094AB0007F695B84B1501081F29DDC7358883864AB458403C4BFDB4480EB96C4E790CB7D522DEFAAC2E19154C1A9080B566EC24518F464383ECE6DE2A8E4832C6B973643AB9DA375C5466A9D5A6E6A7F0416A3E6EA4E27333F96ABEA561DA56B0FAC6AE4A0F43BC243FE3BB066892F9218A60C121113FFC0BA491E7DEAFE0A9BBBF077605396F87E5D229409E71A033874138711C462730BCB5CCE4BCFB69C269DA3129664359A4C894B268E8F6CEB0A37278F3E940EAF29BC10610CA821C444807743848098491E909A4CDB5DD94BFE5FEC8608C320B1AD39597F02B6124F53FBE8ED5BDBBAA06BF08A915C827B4631A69048C40918245476BD22CF74950AACECFF997A1072DBBA053F9DE64F34CAF03F4AA71E72475FC461701BFA054536FC7047E21508943FD4E7166112BB8A2413A702D25678A58C3AC22B5DFB1D5E5F125ECAAE0826201CCE50E46273F9F71D0DFAF39AF98473BAA46E9EC9725D2440D5A9C14190637C580C143837C540111F5D05B923AB6DB1984DAB62C8D11629D22993109D031139740CC379F84CE11661999FB92324FD52517936202ACFBEB9A81C9EF4B700CD9CF21B18EC06B424A8C14C0DE54B7EE123CB52B34E086C32D907F6D0E21EC4FE063D94EDF6618329AD69E539048F10E77A2CA88FA5AF6D7D267E823FC79A4F1AAB3F86BE57AE3DDABEF646BA0A8D56AE3FD60D9D99B43E78CA79E8D2D41E75DFE719ADB9DD39F3AC2DE9ADCABBF9E13C470BD2086D86EE9DDA3F69E29BF995F8A9F8E5E9B5C96F6CAB717ECDCEF05C11609DBA594D3C23DC259E8E7BB484D7B04CCD0A5D8C93A27FBB2ECD9CFBBF4DD38CAC8A5D9A7DB7326B552E0B3BBC0709425989A25A929653B01686D8C2CB4E1E5E3C4F35AAF492F50244FDF8C47C51457AD3B19AF24DF2221B69E4B931779067B94A234E4DA790D64CA56C5F1CF1B515860A4045E4F6882905AD5474BA71289050E350D858857A53A5CEEA66466BD3560F805D213044D706E86B0C32D93A2B5A9C3025D4ABBBBE935DF68BA680D3D21598CC4914618AAF7509F2116B91B508666F16FDEFD041C6C371B9E12A5D4A5BEE8425055981328B5BA3A41734E6022B68F248E46138F3026D9921B05BC2A6D8B011BBBAAF8A702A96CBBF3312F566AF1257E6BB408D029429550E5434EB74697B86F82436DC9866A19F04ACEDD6B58D3AABB6EAF4D988CE61E22882AB667134BB68274FD3CA9D7C9047CC401F6459B2BF0F5AE8BEB40FDA3834EE9475468D89EEFCD48AB3CE529DFB6A90D292983BE1441E88FD5162A46AC5C8998211ED1EB61F8CBCB4F59B678D21588B72A13D208B159DA24E1E8DA62B5AB31CD0CDD02950531E264FA4757241DC4FA2FCD81F28912975B40BA31EFD033D9655155B1C962D30FACB1004AD06AA974503ED9332DA9BC7EA6556578194384616FDC4D9ED33AD6A539794315E566F4A9536C92BA6DD0F3C5A09952DB12D94FD196D84E5D362C3050423B960B4F8C39FF914B34AB5604E185D0217596BC03E3A1C1F296F455FCFBB8DC3B9E77779BC79F576379526DDD93AEBD91FAEF7D2D83389DD2712EBDDB4AD4C7BBE4A7CB75B2B5343E3DFC3BFC5FE1AFF82B24D6A8F9EDCCA53B06652ADF171C93C584FED3F539A13EBF2B7879CECC0BA8E310D9C5887D65FFB029376A8BC466FFB6B8552BF101C68BAF673555F6B3CF2765BBADCA21FCC72B21E30D3B7CE25EEB7714AB407740FEB33D7AAE8D76905EB5DA821DD5B4409C43256D25E0B17311630DA15E426A6CCA511F11BBAEA055897C3422A52F25367CE20022643B7A156978DB6DC0C4AA68A3977A93EA8D76E2C97FB3BEA256192769355017677E78782A5BB0FF701167367A04FFE7C65BC986E33358FA9CE32F8E91BC24A57EF991DF7324869BD30EE1D27E6672EBD69DED25E6B7E00D2F68095DD17B1967D9469283B1C5B1E648C8F5BED6F5B26CEE60714D3BB57DBB39789ABF155C528AD997135D52AB3718B977B736B38ADF6ACB0F3E5497FAEDAEBBB5AF928B6ED79ADA545D45FD496FC636A61ED55C9E2E16EAB92E6B6939AAA9576F36B28D8E3D1506F3361BAAA7D6D8C9992D355C5427E7BCCC06D24AA72CD255B8645BA54242A962865FD1C04C13B34398D055D1257E0B40B783196DF0CE55F829C078FE05DB2EB44448940952178F41BDF20C9BCBB6DFFF465B429F3E43A4ABF0CDA870A2826956D806BF621A1B52F5E2E0CF78B161632A1E73756E94B216FAEAB4DC9E92A641D19E5E62BCFA13B08221F99F16BB620CF3044B67B0E9F6045DC4DD12D6C67B2DB114DB34FCE2859C524E0398F8A1E7F2286BD60FDEE3F4AF32CE2742F0000 , N'6.4.4')
END

